<html>
<head>
  <%- include('header') %>
</head>
<body>
  <%- include('navbar') %>
  <div class="container">
    <h2>Data for the latest run</h2>
    <table border="1">
      <caption>Slowest requests</caption>
      <tr>
        <th>URL</th>
        <th>Type</th>
        <th>Durations</th>
      </tr>
      <% if (slowestDurations) {
        slowestDurations['records'].sort(function(a, b) {
          return b['duration'] - a['duration']
        })
        for (var i=0; i < slowestDurations['records'].length; i++) { %>
          <tr>
            <td><%= slowestDurations['records'][i]['url'] %></td>
            <td><%= slowestDurations['records'][i]['type'] %></td>
            <td><%= slowestDurations['records'][i]['duration'] %></td>
          </tr>
        <% }
      } %>
    </table>
    <table border="1">
      <caption>Requests with the biggest variance from moving average</caption>
      <tr>
        <th>URL</th>
        <th>Type</th>
        <th>Variance</th>
      </tr>
      <% if (mostVaryingDurations) {
        mostVaryingDurations['records'].sort(function(a, b) {
          return b['variance'] - a['variance']
        })
        for (var i=0; i < mostVaryingDurations['records'].length; i++) { %>
          <tr>
            <td><%= mostVaryingDurations['records'][i]['url'] %></td>
            <td><%= mostVaryingDurations['records'][i]['type'] %></td>
            <td><%= mostVaryingDurations['records'][i]['variance'] %></td>
          </tr>
        <% }
      } %>
    </table>
  </div>
</body>
</html>
